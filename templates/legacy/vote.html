{{define "content"}}
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;">
  <tr>
    <td>
      <p style="margin: 0 0 10px 0;"><a href="/">← Back</a></p>
      <h1 class="header-amber">{{.Category.Name}}</h1>
      <p class="muted-text" style="margin: 5px 0 0 0;">
        {{if eq .Category.VoteType "single"}}Select one option
        {{else if eq .Category.VoteType "approval"}}Select all that apply
        {{else if eq .Category.VoteType "ranked"}}Rank your top {{.MaxRank}} choices
        {{end}}
      </p>
    </td>
  </tr>
</table>

{{if .Success}}
<!-- Success state -->
<table width="100%" cellpadding="20" cellspacing="0" border="0" class="success-box">
  <tr>
    <td>
      <div class="success-checkmark">✓</div>
      <b style="color: #22c55e; font-size: 16px;">VOTE RECORDED!</b>
      <p style="color: #666; margin: 10px 0;">Thank you for voting</p>
      <p style="margin: 10px 0 0 0;"><a href="/">← Back to all votes</a></p>
    </td>
  </tr>
</table>
{{else}}

{{if .Error}}
<p class="error">{{.Error}}</p>
{{end}}

<form method="POST" action="/vote/{{.Category.ID}}">
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td>
        <p><b>Your nickname:</b></p>
        <input type="text" name="nickname" value="{{.Nickname}}" size="40" class="form-input">
      </td>
    </tr>
  </table>

  <p style="margin-top: 20px;"><b>Make your selection:</b></p>

  {{if eq .Category.VoteType "single"}}
  <!-- Single choice (radio) -->
  {{range .Options}}
  <p class="option-box">
    <input type="radio" name="choice" value="{{.ID}}" id="opt{{.ID}}">
    <label for="opt{{.ID}}">{{.Name}}</label>
  </p>
  {{end}}

  {{else if eq .Category.VoteType "approval"}}
  <!-- Approval (checkboxes) -->
  {{range .Options}}
  <p class="option-box">
    <input type="checkbox" name="choice" value="{{.ID}}" id="opt{{.ID}}">
    <label for="opt{{.ID}}">{{.Name}}</label>
  </p>
  {{end}}

  {{else if eq .Category.VoteType "ranked"}}
  <!-- Ranked (dropdowns) -->
  {{range $i, $e := .Ranks}}
  {{$rank := add $i 1}}
  <p class="option-box">
    <span class="rank-badge">#{{$rank}}</span>
    <select name="rank{{$rank}}" id="rank{{$rank}}" style="width: 400px; padding: 6px;">
      <option value="">Select choice #{{$rank}}</option>
      {{range $.Options}}
      <option value="{{.ID}}">{{.Name}}</option>
      {{end}}
    </select>
  </p>
  {{end}}
  {{end}}

  <p style="margin-top: 20px;">
    <input type="submit" value="SUBMIT VOTE" class="btn" style="font-size: 14px; padding: 12px 24px;">
  </p>
</form>

<p><a href="/">Back to home</a></p>
{{end}}
{{end}}
