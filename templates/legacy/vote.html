{{define "content"}}
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;">
  <tr>
    <td>
      <p style="margin: 0 0 10px 0;"><a href="/">← Back</a></p>
      <h1 style="color: #f59e0b; font-family: 'Courier New', Courier, monospace; margin: 0;">
        {{.Category.Name}}
      </h1>
      <p style="color: #999; font-size: 12px; margin: 5px 0 0 0;">
        {{if eq .Category.VoteType "single"}}Select one option
        {{else if eq .Category.VoteType "approval"}}Select all that apply
        {{else if eq .Category.VoteType "ranked"}}Rank your top {{.MaxRank}} choices
        {{end}}
      </p>
    </td>
  </tr>
</table>

{{if .Success}}
<!-- Success state -->
<table width="100%" cellpadding="20" cellspacing="0" border="0" style="border: 2px solid #22c55e; background-color: #e8f5e9;">
  <tr>
    <td align="center">
      <div style="font-size: 48px; color: #22c55e; margin-bottom: 10px;">✓</div>
      <b style="color: #22c55e; font-size: 16px;">VOTE RECORDED!</b>
      <p style="color: #666; margin: 10px 0;">Thank you for voting</p>
      <p style="margin: 10px 0 0 0;"><a href="/">← Back to all votes</a></p>
    </td>
  </tr>
</table>
{{else}}

{{if .Error}}
<p class="error">{{.Error}}</p>
{{end}}

<form method="POST" action="/vote/{{.Category.ID}}">
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td>
        <p><b>Your nickname:</b></p>
        <input type="text" name="nickname" value="{{.Nickname}}" size="40" style="width: 100%; padding: 8px; border: 1px solid #ccc;">
      </td>
    </tr>
  </table>

  <p style="margin-top: 20px;"><b>Make your selection:</b></p>

  {{if eq .Category.VoteType "single"}}
  <!-- Single choice (radio) -->
  {{range .Options}}
  <p style="border: 1px solid #ccc; padding: 10px; margin: 5px 0; background-color: #fafafa;">
    <input type="radio" name="choice" value="{{.ID}}" id="opt{{.ID}}">
    <label for="opt{{.ID}}">{{.Name}}</label>
  </p>
  {{end}}

  {{else if eq .Category.VoteType "approval"}}
  <!-- Approval (checkboxes) -->
  {{range .Options}}
  <p style="border: 1px solid #ccc; padding: 10px; margin: 5px 0; background-color: #fafafa;">
    <input type="checkbox" name="choice" value="{{.ID}}" id="opt{{.ID}}">
    <label for="opt{{.ID}}">{{.Name}}</label>
  </p>
  {{end}}

  {{else if eq .Category.VoteType "ranked"}}
  <!-- Ranked (dropdowns) -->
  {{range $i, $e := .Ranks}}
  {{$rank := add $i 1}}
  <p style="border: 1px solid #ccc; padding: 10px; margin: 5px 0; background-color: #fafafa;">
    <span style="display: inline-block; width: 40px; height: 30px; background-color: #fff3cd; border: 1px solid #f59e0b; text-align: center; line-height: 30px; color: #f59e0b; font-weight: bold; margin-right: 10px;">
      #{{$rank}}
    </span>
    <select name="rank{{$rank}}" id="rank{{$rank}}" style="width: 400px; padding: 6px;">
      <option value="">Select choice #{{$rank}}</option>
      {{range $.Options}}
      <option value="{{.ID}}">{{.Name}}</option>
      {{end}}
    </select>
  </p>
  {{end}}
  {{end}}

  <p style="margin-top: 20px;">
    <input type="submit" value="SUBMIT VOTE" class="btn" style="font-size: 14px; padding: 12px 24px;">
  </p>
</form>

<p><a href="/">Back to home</a></p>
{{end}}
{{end}}
