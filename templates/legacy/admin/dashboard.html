{{define "content"}}
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 20px;">
  <tr>
    <td>
      <h1 class="header-green">ADMIN</h1>
      <p class="muted-text" style="margin: 5px 0 0 0;">Manage voting polls</p>
    </td>
    <td align="right">
      <a href="/admin/category/new" class="btn">+ New Poll</a>
    </td>
  </tr>
</table>

{{if .Categories}}
<table class="data">
  <tr>
    <th width="40">ID</th>
    <th>Name</th>
    <th width="80">Type</th>
    <th width="200" align="center">Status</th>
    <th width="80" align="right">Actions</th>
  </tr>
  {{range .Categories}}
  <tr style="{{if eq .Status "archived"}}background-color: #0d0d0d;{{end}}">
    <td><b>{{.ID}}</b></td>
    <td><a href="/admin/category/{{.ID}}">{{.Name}}</a></td>
    <td style="text-transform: capitalize;">{{.VoteType}}</td>
    <td align="center">
      {{if eq .Status "draft"}}
      <span class="badge-draft">DRAFT</span>
      <form method="POST" action="/admin/category/{{.ID}}/open" style="display:inline;">
        <input type="submit" value="Open" class="btn" style="padding: 4px 8px; font-size: 11px;">
      </form>
      {{else if eq .Status "open"}}
      <span class="badge-open">OPEN</span>
      <form method="POST" action="/admin/category/{{.ID}}/close" style="display:inline;">
        <input type="submit" value="Close" class="btn-red">
      </form>
      {{else if eq .Status "closed"}}
      <span class="badge-closed">CLOSED</span>
      <form method="POST" action="/admin/category/{{.ID}}/reopen" style="display:inline;">
        <input type="submit" value="Reopen" class="btn" style="padding: 4px 8px; font-size: 11px;">
      </form>
      <form method="POST" action="/admin/category/{{.ID}}/archive" style="display:inline;">
        <input type="submit" value="Archive" class="btn-gray">
      </form>
      {{else if eq .Status "archived"}}
      <span class="badge-archived">ARCHIVED</span>
      {{end}}
    </td>
    <td align="right">
      <a href="/results/{{.ID}}" style="font-size: 11px;">Results</a>
    </td>
  </tr>
  {{end}}
</table>
{{else}}
<table width="100%" cellpadding="20" cellspacing="0" border="0" class="empty-state">
  <tr>
    <td>
      <p style="color: #999; margin: 0;">No polls yet</p>
      <p class="muted-text-small" style="margin: 10px 0 0 0;">Create one to get started</p>
    </td>
  </tr>
</table>
{{end}}
{{end}}
